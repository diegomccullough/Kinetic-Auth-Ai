<!DOCTYPE html>
<html lang="en">
<!-- Layout only. Script order: ticket → auth → app (controller). -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ticket Purchase</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- SCREEN 1: Event (ticketUI) -->
  <section id="screen-event" class="card screen active">
    <h1 id="event-heading">Live Event</h1>
    <p id="event-subtitle" class="subtitle">Limited availability</p>
    <div id="event-title" class="event-title">Summer Night Concert 2025</div>
    <div id="event-meta" class="event-meta">Sat, Aug 16 · 8:00 PM · Riverside Arena</div>
    <button id="btn-buy">Buy Tickets</button>
  </section>

  <!-- SCREEN 2: Queue (ticketUI + queueEngine) -->
  <section id="screen-queue" class="card screen">
    <h1 id="queue-heading">Please wait</h1>
    <p id="queue-line1" class="queue-msg">High demand detected. You are in the queue.</p>
    <p id="queue-line2" class="queue-msg">Your spot is reserved. This usually takes a moment.</p>
    <button id="btn-queue-continue">Continue</button>
  </section>

  <!-- SCREEN 3: Verification Page (dark theme, glass card) -->
  <section id="screen-verification" class="screen verification-screen">
    <div class="verification-card card-glass">
      <h1 class="verification-title">Verify it's you</h1>
      <p class="verification-subtitle">Step-up authentication</p>

      <div id="verification-content">
        <div class="verification-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          <div class="verification-progress-fill" id="verification-progress-fill"></div>
        </div>

        <div class="verification-steps" aria-label="Verification progress">
          <div class="step" id="step-1" data-step="1">
            <span class="step-num">1</span>
            <span class="step-label">Tilt Left</span>
          </div>
          <div class="step" id="step-2" data-step="2">
            <span class="step-num">2</span>
            <span class="step-label">Tilt Right</span>
          </div>
          <div class="step" id="step-3" data-step="3">
            <span class="step-num">3</span>
            <span class="step-label">Motion Analysis</span>
          </div>
        </div>

        <div class="verification-status-panel">
          <div class="motion-feedback" id="motion-feedback" aria-hidden="true">
            <span class="motion-feedback-dot"></span>
            <span class="motion-feedback-label">Live</span>
          </div>
          <div class="verification-status" id="verification-status" aria-live="polite">Capturing motion data…</div>
        </div>

        <div class="motion-graph-wrap">
          <canvas id="motion-graph" class="motion-graph" width="340" height="44" aria-label="Live gamma motion"></canvas>
        </div>

        <div class="instruction verification-instruction" id="instruction">Tilt your phone LEFT</div>
        <div class="gamma-readout verification-gamma">Gamma: <span id="gamma">—</span>°</div>

        <div id="motion-profile" class="motion-profile hidden" aria-label="Motion analysis results">
          <div class="motion-profile-row"><span>Motion Duration</span><span id="profile-duration">—</span></div>
          <div class="motion-profile-row"><span>Stability Score</span><span id="profile-stability">—</span></div>
          <div class="motion-profile-row"><span>Human Confidence Score</span><span id="profile-confidence">—</span></div>
        </div>

        <div id="permission-prompt" class="permission-prompt hidden">
          <button id="permission-btn" class="btn-primary">Enable motion</button>
        </div>
        <button id="btn-verification-continue" class="btn-primary" disabled>Proceed</button>
      </div>

      <div class="verification-transparency" aria-label="Privacy and verification notice">
        <p>Motion data is processed locally on-device. No biometric data is stored or transmitted.</p>
        <p>Verification triggered due to elevated traffic anomaly.</p>
      </div>

      <div id="verification-fallback" class="hidden verification-fallback">
        Motion sensors are not supported. Cannot complete verification.
      </div>
    </div>
  </section>

  <!-- SCREEN 4: Confirmation (ticketUI) -->
  <section id="screen-confirmation" class="card screen">
    <h1 id="confirmation-heading">Tickets Reserved</h1>
    <p id="confirmation-line1" class="confirmation-msg">Thank you. Your order has been received.</p>
    <p id="confirmation-line2" class="confirmation-msg">Confirmation #8294-1A. A copy has been sent to your email. Present this confirmation at the venue.</p>
    <button id="btn-start-over">Start over</button>
  </section>

  <script src="ticket/landing.js"></script>
  <script src="ticket/queue.js"></script>
  <script src="ticket/surgeEngine.js"></script>
  <script src="auth/motionAuth.js"></script>
  <script src="auth/voiceAuth.js"></script>
  <script src="auth/aiReasoning.js"></script>
  <script src="auth/authUI.js"></script>
  <script src="app.js"></script>
</body>
</html>
